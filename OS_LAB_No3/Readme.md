## Условие задачи

Составить и отладить программу на языке Си, осуществляющую работу с процессами и взаимодействие между ними в операционной системе Linux. В результате работы программа (основной процесс) должен создать для решения задачи один или несколько дочерних процессов. Взаимодействие между процессами осуществляется через разделяемую память (shared memory) с использованием семафоров для синхронизации.

Необходимо обрабатывать системные ошибки, которые могут возникнуть в результате работы.

**Группа вариантов 1, Вариант 2:**

Данная лабораторная работа является модификацией первой лабораторной работы: вместо каналов (pipe) используется разделяемая память и memory mapping. Поскольку блокирующего чтения из каналов больше нет, для синхронизации чтения и записи из shared memory используются семафоры.

Родительский процесс создает дочерний процесс. Первой строчкой пользователь в консоль родительского процесса пишет имя файла, которое будет передано при создании дочернего процесса. Родительский и дочерний процесс должны быть представлены разными программами. Родительский процесс передает команды пользователя через именованный shared memory объект (shm_p2c), который находится в оперативной памяти. Дочерний процесс при необходимости передает данные в родительский процесс через другой сегмент shared memory (shm_c2p). Результаты своей работы дочерний процесс пишет в созданный им файл.

Пользователь вводит команды вида: «число число число<endline>». Далее эти числа передаются от родительского процесса в дочерний. Дочерний процесс считает их сумму и выводит её в файл. Числа имеют тип float. Количество чисел может быть произвольным.

**Важные требования:**
- Shared memory и memory mapping — это не одно и то же. В данной лабораторной работе создается именованный shared memory объект, который находится в оперативной памяти, а не на диске в виде файла.
- Названия именованных shared memory и семафоров не должны быть константными — они генерируются уникальными для каждой пары программ server/client на основе PID процесса и текущего времени.

## Сборка

Компиляция:

```sh
gcc -o lab_01_parent src/server.c -std=c17 -lrt -lpthread
gcc -o lab_01_child src/client.c -std=c17 -lrt -lpthread
```

### CMake

```sh
mkdir -p build
cd build
cmake ..
make
```

Исполняемые файлы будут созданы в директории `build/`:
- `lab_01_parent` - родительский процесс (server)
- `lab_01_child` - дочерний процесс (client)

## Запуск

```sh
./build/lab_01_parent
```

**Пример использования:**

```sh
$ ./build/lab_01_parent
test_output.txt
1.5 2.5 3.5
10 20 30

sum: 7.5
sum: 60.0
```

После выполнения в файле `test_output.txt` будут записаны результаты:
```
sum: 7.5
sum: 60.0
```

## Тестирование с strace

Для отладки и анализа системных вызовов можно использовать `strace`:

```sh
strace -f -o strace_output.txt ./build/lab_01_parent < test_input.txt
```

Где `test_input.txt` содержит:
```
test_output.txt
1.5 2.5 3.5
10 20 30

```
